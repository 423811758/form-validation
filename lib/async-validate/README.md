modified from https://github.com/freeformsystems/async-validate